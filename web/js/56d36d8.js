$(function(){$("#"+_globales.inputBaseName+"feVenta").datepicker({changeMonth:false,changeYear:false,buttonImageOnly:false,dateFormat:"dd-mm-yy"},$.datepicker.regional["es"]);var pesoTotalVenta=$("#"+_globales.inputBaseName+"cantidadTotalVenta");var valorOnza=$("#"+_globales.inputBaseName+"valorOnza");pesoTotalVenta.number(true,2,",",".");valorOnza.number(true,2,",",".");if(_globales.place=="proveedores"){var dolarReferenciaDia=$("#"+_globales.inputBaseName+"dolarReferenciaDia");var montoBsCierre=$("#"+_globales.inputBaseName+"montoBsCierrePorGramo");dolarReferenciaDia.number(true,2,",",".");montoBsCierre.number(true,2,",",".")}if(_globales.place=="hc"){var montoTotalDolar=$("#"+_globales.inputBaseName+"montoTotalDolar");montoTotalDolar.number(true,2,",",".");valorOnza.keyup(function(){if(pesoTotalVenta.val()!=""){var valorPorGramoEnDolares=parseFloat(valorOnza.val())/parseFloat(_globales.onzaTroyGramos);var resultadoMontoTotalDolar=parseFloat(pesoTotalVenta.val())*valorPorGramoEnDolares;var resultadoFinal=resultadoMontoTotalDolar.toFixed(2)*parseFloat(_globales.margenGanancia);montoTotalDolar.val(resultadoFinal)}});pesoTotalVenta.keyup(function(){if(valorOnza.val()!=""){var valorPorGramoEnDolares=parseFloat(valorOnza.val())/parseFloat(_globales.onzaTroyGramos);var resultadoMontoTotalDolar=parseFloat(pesoTotalVenta.val())*valorPorGramoEnDolares;var resultadoFinal=resultadoMontoTotalDolar.toFixed(2)*parseFloat(_globales.margenGanancia);montoTotalDolar.val(resultadoFinal)}})}});function undoNumberFormatForRegister(){var valorOnza=$("#"+_globales.inputBaseName+"valorOnza");var nuevoValorOnza=$.number(valorOnza.val(),2,".","");valorOnza.number(true,2,".","");valorOnza.val(nuevoValorOnza);var pesoTotalVenta=$("#"+_globales.inputBaseName+"cantidadTotalVenta");var nuevoValorpesoTotalVenta=$.number(pesoTotalVenta.val(),2,".","");pesoTotalVenta.number(true,2,".","");pesoTotalVenta.val(nuevoValorpesoTotalVenta);if(_globales.place=="proveedores"){var dolarReferenciaDia=$("#"+_globales.inputBaseName+"dolarReferenciaDia");var nuevodolarReferenciaDia=$.number(dolarReferenciaDia.val(),2,".","");dolarReferenciaDia.number(true,2,".","");dolarReferenciaDia.val(nuevodolarReferenciaDia);var montoBsCierre=$("#"+_globales.inputBaseName+"montoBsCierrePorGramo");var nuevomontoBsCierre=$.number(montoBsCierre.val(),2,".","");montoBsCierre.number(true,2,".","");montoBsCierre.val(nuevomontoBsCierre)}if(_globales.place=="hc"){var montoTotalDolar=$("#loro_entitybundle_cierres_hc_montoTotalDolar");var nuevoMontoTotalDolar=$.number(montoTotalDolar.val(),2,".","");montoTotalDolar.number(true,2,".","");montoTotalDolar.val(nuevoMontoTotalDolar)}}
(function($){$.widget("custom.combobox",{options:{inputName:"default-value"},_create:function(){this.wrapper=$("<span>").addClass("custom-combobox").insertAfter(this.element);this.element.hide();this._createAutocomplete()},_createAutocomplete:function(){var selected=this.element.children(":selected"),value=selected.val()?selected.text():"";this.input=$("<input>").appendTo(this.wrapper).val(value).attr("title","").addClass("form-control").attr("name",this.options.inputName).autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).tooltip({tooltipClass:"ui-state-highlight"});this._on(this.input,{autocompleteselect:function(event,ui){ui.item.option.selected=true;this._trigger("select",event,{item:ui.item.option})},autocompletechange:"_removeIfInvalid"})},_source:function(request,response){var matcher=new RegExp($.ui.autocomplete.escapeRegex(request.term),"i");response(this.element.children("option").map(function(){var text=$(this).text();if(this.value&&(!request.term||matcher.test(text)))return{label:text,value:text,option:this}}))},_removeIfInvalid:function(event,ui){if(ui.item){return}var value=this.input.val(),valueLowerCase=value.toLowerCase(),valid=false;this.element.children("option").each(function(){if($(this).text().toLowerCase()===valueLowerCase){this.selected=valid=true;return false}});if(valid){return}this.input.val("").attr("title",value+" no se encuentra en la lista.").tooltip("open");this.element.val(null);this._delay(function(){this.input.tooltip("close").attr("title","")},2500);this.input.autocomplete("instance").term=""},_destroy:function(){this.wrapper.remove();this.element.show()}})})(jQuery);